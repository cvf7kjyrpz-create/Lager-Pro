<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Lager App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#2f7d32">

  <!-- iOS PWA Support -->
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <link rel="stylesheet" href="styles/style.css" />
</head>

<body>
  <header class="app-header">
    <h1>Lager App</h1>
  </header>

  <main>
    <section class="controls">
      <button id="btn-add-item" class="primary">+ Artikel</button>
      <button id="btn-export">Export (JSON)</button>
      <label class="import-label">
        Import
        <input type="file" id="input-import" hidden accept="application/json">
      </label>
    </section>

    <section class="filters">
      <input id="search" type="search" placeholder="Suche nach Name, Nummer, Zustand, Notiz …">
      <select id="filter-flag">
        <option value="all">Alle</option>
        <option value="flagged">Markierte</option>
        <option value="low">Niedriger Bestand</option>
      </select>
    </section>

    <div class="table-wrapper">
      <table class="data-table">
        <thead>
          <tr>
            <th>★</th>
            <th>Artikelname</th>
            <th>Artikelnr.</th>
            <th>Zustand</th>
            <th>Größe</th>
            <th>Wo gekauft</th>
            <th>Menge</th>
            <th>€/Stk</th>
            <th>Kaufdatum</th>
            <th>Foto</th>
            <th>Notiz</th>
            <th>Aktionen</th>
          </tr>
        </thead>
        <tbody id="inventory-body"></tbody>
      </table>
    </div>
  </main>

  <!-- Artikel-Dialog -->
  <dialog id="item-dialog">
    <form id="item-form" method="dialog" class="form-grid">
      <h3 id="dialog-title">Artikel</h3>

      <label>
        Artikelname
        <input id="item-name" required>
      </label>

      <label>
        Artikelnummer
        <input id="item-number">
      </label>

      <label>
        Zustand
        <select id="item-condition">
          <option value="">– bitte wählen –</option>
          <option value="Neu">Neu</option>
          <option value="Wie neu">Wie neu</option>
          <option value="Gebraucht">Gebraucht</option>
        </select>
      </label>

      <label>
        Größe
        <input id="item-size">
      </label>

      <label>
        Wo gekauft
        <input id="item-store">
      </label>

      <label>
        Menge
        <input id="item-quantity" type="number" min="0" value="0">
      </label>

      <label>
        Einkaufspreis pro Stück (€)
        <input id="item-unit-price" type="number" min="0" step="0.01" value="0">
      </label>

      <label>
        Kaufdatum
        <input id="item-date" type="date">
      </label>

      <label class="full-width">
        Notiz
        <textarea id="item-note" rows="3"></textarea>
      </label>

      <label>
        Foto
        <input id="item-photo" type="file" accept="image/*">
        <small id="item-photo-info" class="hint">Kein Foto ausgewählt</small>
      </label>

      <label class="checkbox">
        <input id="item-flagged" type="checkbox">
        Artikel markieren
      </label>

      <menu class="dialog-menu">
        <button value="cancel">Abbrechen</button>
        <button value="save" class="primary">Speichern</button>
      </menu>
    </form>
  </dialog>

  <!-- Foto-Dialog -->
  <dialog id="photo-dialog">
    <div class="dialog-photo-content">
      <img id="photo-dialog-img" alt="Artikel-Foto">
      <menu class="dialog-menu">
        <button id="photo-dialog-close" class="primary">Schließen</button>
      </menu>
    </div>
  </dialog>

  <!-- Notiz-Dialog -->
  <dialog id="note-dialog">
    <div class="dialog-note-content">
      <h3>Notiz</h3>
      <pre id="note-dialog-text"></pre>
      <menu class="dialog-menu">
        <button id="note-dialog-close" class="primary">Schließen</button>
      </menu>
    </div>
  </dialog>

  <script type="module" src="src/app.js"></script>

  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./service-worker.js");
    }
  </script>
</body>
</html>
